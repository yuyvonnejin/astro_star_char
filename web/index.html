<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stellar Property Pipeline</title>
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdn.plot.ly/plotly-2.35.0.min.js" charset="utf-8"></script>
</head>
<body>

<div class="container">
  <header>
    <h1>Stellar Property Pipeline</h1>
    <p>Compute distance, temperature, luminosity, radius, and mass from Gaia DR3 photometry</p>
  </header>

  <!-- Input Section -->
  <div class="input-section">
    <div class="input-row">
      <input type="text" id="star-input" placeholder="Enter star name (e.g. Vega) or Gaia DR3 source ID">
      <button class="btn" onclick="lookupStar()">Run Pipeline</button>
    </div>

    <div class="examples">
      <label>Examples:</label>
      <button class="btn btn-sm btn-outline" onclick="loadExample('Sun')">Sun</button>
      <button class="btn btn-sm btn-outline" onclick="loadExample('Proxima Cen')">Proxima Cen</button>
      <button class="btn btn-sm btn-outline" onclick="loadExample('Sirius A')">Sirius A</button>
      <button class="btn btn-sm btn-outline" onclick="loadExample('Delta Cephei')">Delta Cephei</button>
      <button class="btn btn-sm btn-outline" onclick="loadExample('Alpha Cen A')">Alpha Cen A</button>
      <button class="btn btn-sm btn-outline" onclick="loadExample('Barnard\'s Star')">Barnard's Star</button>
    </div>

    <button class="manual-toggle" onclick="toggleManualInput()">Advanced: Manual Parameter Input</button>

    <div id="manual-panel">
      <div class="manual-grid">
        <div class="manual-field">
          <label>Parallax (mas) *</label>
          <input type="number" id="manual-parallax_mas" step="any" placeholder="e.g. 100.0">
        </div>
        <div class="manual-field">
          <label>Parallax Error (mas) *</label>
          <input type="number" id="manual-parallax_error_mas" step="any" placeholder="e.g. 0.01">
        </div>
        <div class="manual-field">
          <label>G magnitude *</label>
          <input type="number" id="manual-phot_g_mean_mag" step="any" placeholder="e.g. 4.83">
        </div>
        <div class="manual-field">
          <label>BP magnitude</label>
          <input type="number" id="manual-phot_bp_mean_mag" step="any" placeholder="e.g. 5.24">
        </div>
        <div class="manual-field">
          <label>RP magnitude</label>
          <input type="number" id="manual-phot_rp_mean_mag" step="any" placeholder="e.g. 4.42">
        </div>
        <div class="manual-field">
          <label>BP - RP color *</label>
          <input type="number" id="manual-bp_rp" step="any" placeholder="e.g. 0.82 (auto-computed if BP+RP given)">
        </div>
        <div class="manual-field">
          <label>A_G extinction (default: 0)</label>
          <input type="number" id="manual-ag_gspphot" step="any" placeholder="0.0">
        </div>
        <div class="manual-field">
          <label>E(BP-RP) reddening (default: 0)</label>
          <input type="number" id="manual-ebpminrp_gspphot" step="any" placeholder="0.0">
        </div>
        <div class="manual-field">
          <label>[Fe/H] metallicity (default: 0)</label>
          <input type="number" id="manual-feh" step="any" placeholder="0.0">
        </div>
        <div class="manual-field">
          <label>log(g) (default: 4.0)</label>
          <input type="number" id="manual-logg" step="any" placeholder="4.0">
        </div>
        <div class="manual-field">
          <label>Gaia Teff estimate (K, optional)</label>
          <input type="number" id="manual-teff-gspphot" step="any" placeholder="For comparison only">
        </div>
        <div class="manual-field">
          <label>Gaia Luminosity (Lsun, optional)</label>
          <input type="number" id="manual-lum-gspphot" step="any" placeholder="For validation only">
        </div>
        <div class="manual-field checkbox-field">
          <input type="checkbox" id="manual-is-cepheid">
          <label>Cepheid variable?</label>
        </div>
        <div class="manual-field">
          <label>Cepheid Period (days)</label>
          <input type="number" id="manual-cepheid-period" step="any" placeholder="e.g. 5.37">
        </div>
      </div>
      <button class="btn" onclick="runFromManualInput()">Run with Manual Data</button>
    </div>
  </div>

  <!-- Status -->
  <div id="status" class="status"></div>

  <!-- Step 0: Input Data -->
  <div id="step-0" class="step">
    <div class="step-header" onclick="toggleStep('step-0')">
      <span class="step-number">0</span>
      <h3>Input Data Retrieved</h3>
      <span class="chevron">&#9660;</span>
    </div>
    <div id="step-0-content" class="step-content"></div>
  </div>

  <!-- Step 1: Distance -->
  <div id="step-1" class="step">
    <div class="step-header" onclick="toggleStep('step-1')">
      <span class="step-number">1</span>
      <h3>Module 1: Distance</h3>
      <span class="chevron">&#9660;</span>
    </div>
    <div id="step-1-content" class="step-content"></div>
  </div>

  <!-- Step 2: Temperature / Luminosity / Radius -->
  <div id="step-2" class="step">
    <div class="step-header" onclick="toggleStep('step-2')">
      <span class="step-number">2</span>
      <h3>Module 2: Temperature, Luminosity, Radius</h3>
      <span class="chevron">&#9660;</span>
    </div>
    <div id="step-2-content" class="step-content"></div>
  </div>

  <!-- Step 3: Mass -->
  <div id="step-3" class="step">
    <div class="step-header" onclick="toggleStep('step-3')">
      <span class="step-number">3</span>
      <h3>Module 3: Mass</h3>
      <span class="chevron">&#9660;</span>
    </div>
    <div id="step-3-content" class="step-content"></div>
  </div>

  <!-- Summary -->
  <div id="summary" class="step" style="display:none;">
    <div id="summary-content"></div>
  </div>

  <!-- HR Diagram -->
  <div id="hr-diagram" class="step" style="display:none;">
    <h3>HR Diagram</h3>
    <div id="hr-chart"></div>
  </div>

  <footer>
    <p>Stellar Property Pipeline -- Educational tool for computing stellar properties from Gaia DR3 data</p>
    <p>Data: <a href="https://gea.esac.esa.int/" target="_blank">ESA Gaia Archive</a> |
       Names: <a href="https://simbad.cds.unistra.fr/" target="_blank">CDS SIMBAD</a> |
       <a href="https://github.com/" target="_blank">Source on GitHub</a></p>
  </footer>
</div>

<!-- JS modules (order matters: dependencies first) -->
<script src="js/examples.js"></script>
<script src="js/distance.js"></script>
<script src="js/temperature.js"></script>
<script src="js/mass.js"></script>
<script src="js/api.js"></script>
<script src="js/charts.js"></script>
<script src="js/app.js"></script>

</body>
</html>
